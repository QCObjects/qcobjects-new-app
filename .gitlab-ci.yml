image: quickcorp/qcobjects:latest

pages:
  stage: deploy
  script:
  - npm i qcobjects && npm i -D eslint-config-qcobjects
  - npm ci
  - npm test
  - npm build:ts
  - mkdir public
  - cp build/*.* public/
  - cp -Rf css/ public/
  - cp -Rf img/ public/
  - cp -Rf js/ public/
  - cp -Rf spec/ public/
  - cp -Rf templates/ public/
  - cp _redirects public/
  artifacts:
    paths:
    - public
  only:
  - main
